$(function() {

    $("#success-alert1").hide();
    $("#error-alert1").hide();
    $("#success-alert2").hide();
    $("#error-alert2").hide();
    $("#success-alert3").hide();
    $("#error-alert3").hide();
    $("#success-alert4").hide();
    $("#error-alert4").hide();
    $("#success-alert5").hide();
    $("#error-alert5").hide();
    $("#success-alert6").hide();
    $("#error-alert6").hide();
     $("#success-alert7").hide();
    $("#error-alert7").hide();
     $("#success-alert8").hide();
    $("#error-alert8").hide();




    /* Submit External References data*/
    $('#add_extref').click(function() {
        $.ajax({
            url: '/insertextref',
            data: $('#ext_refform').serialize(),
            type: 'POST',
            success: function(response) {
                 $( "#success-alert2" ).fadeIn( 300 ).delay( 2000 ).fadeOut( 600, function () {
                     window.location.reload();
                 } );

                console.log(response);
            },
            error: function(error) {
                $("#error-alert2").fadeTo(2000, 500).slideUp(500, function(){
               $("#error-alert2").slideUp(500);
                });
                console.log(error);
            }
        });

    });

    /* Submit Name data*/
    $('#submit_name').click(function() {
        $.ajax({
            url: '/insertname',
            data: $('#nameform').serialize(),
            type: 'POST',
            success: function(response) {

                 $( "#success-alert3" ).fadeIn( 300 ).delay( 2000 ).fadeOut( 400, function () {
                     window.location.reload();
                 } );
                console.log(response);
            },
            error: function(error) {
                $("#error-alert3").fadeTo(2000, 500).slideUp(500, function(){
               $("#error-alert3").slideUp(500);
                });
                console.log(error);
            }
        });

    });

    /* Aliases data*/
    $('#submit_aliases').click(function() {
        $.ajax({
            url: '/insertaliases',
            data: $('#aliasesform').serialize(),
            type: 'POST',
            success: function(response) {

                 $( "#success-alert4" ).fadeIn( 300 ).delay( 2000 ).fadeOut( 400, function () {
                     window.location.reload();
                 } );
                console.log(response);
            },
            error: function(error) {
                $("#error-alert4").fadeTo(2000, 500).slideUp(500, function(){
               $("#error-alert4").slideUp(500);
                });
                console.log(error);
            }
        });

    });
        $('#alias').change(function () {
        var value = $(this).val();
        $('#alias_final').val(value);
    });

     /* field data*/
     $('#submit_fielddata').click(function() {
        $.ajax({
            url: '/insertfielddata',
            data: $('#fielddataform').serialize(),
            type: 'POST',
            success: function(response) {
                 $( "#success-alert5" ).fadeIn( 300 ).delay( 2000 ).fadeOut( 400, function () {
                     window.location.reload();
                 } );
                console.log(response);
            },
            error: function(error) {
                $("#error-alert5").fadeTo(2000, 500).slideUp(500, function(){
               $("#error-alert5").slideUp(500);
                });
                console.log(error);
            }
        });

    });

     /* Refined capability data*/
     $('#submit_refcapability').click(function() {
        $.ajax({
            url: '/insertrefinedcapability',
            data: $('#refinedcapabilityform').serialize(),
            type: 'POST',
            success: function(response) {

                 $( "#success-alert6" ).fadeIn( 300 ).delay( 2000 ).fadeOut( 400, function () {
                     window.location.reload();
                 } );
                console.log(response);
            },
            error: function(error) {
                $("#error-alert6").fadeTo(2000, 500).slideUp(500, function(){
               $("#error-alert6").slideUp(500);
                });
                console.log(error);
            }
        });

    });
          $('#attr_key').change(function(){
        var key = $(this).val();
        $('#attr_val').keyup(function () {
            var val1 = $(this).val();
            var result = key +":" + val1;
            $('#attr_dict').val(result);
        });
    });
          $('#behavior_refs').change(function () {
            var value = $(this).val();
            $('#behavior_refs_final').val(value);
          });
          $('#refs').change(function () {
            var value = $(this).val();
            $('#refs_final').val(value);
          });

     /* capability data*/
     $('#submit_capability').click(function() {
        $.ajax({
            url: '/insertcapability',
            data: $('#capabilityform').serialize(),
            type: 'POST',
            success: function(response) {

                 $( "#success-alert7" ).fadeIn( 300 ).delay( 2000 ).fadeOut( 400, function () {
                     window.location.reload();
                 } );
                console.log(response);
            },
            error: function(error) {
                $("#error-alert7").fadeTo(2000, 500).slideUp(500, function(){
               $("#error-alert7").slideUp(500);
                });
                console.log(error);
            }
        });

    });
        $('#attr_key2').change(function(){
        var key = $(this).val();
        $('#attr_val2').keyup(function () {
            var val1 = $(this).val();
            var result = key +":" + val1;
            $('#attr_dict2').val(result);
        });
    });
         $('#ref_capability').change(function () {
            var value = $(this).val();
            $('#ref_cap_final').val(value);
          });

        $('#behavior_refs2').change(function () {
            var value = $(this).val();
            $('#behavior_refs_final2').val(value);
          });

          $('#refs2').change(function () {
            var value = $(this).val();
            $('#refs_final2').val(value);
          });

     /* Common code refs data*/
    $('#submit_artifact').click(function() {
        $.ajax({
            url: '/insert_artifact',
            data: $('#artifact').serialize(),
            type: 'POST',
            success: function(response) {

             //   $("#success-alert1").fadeTo(2000, 500).slideUp(500, function(){
             //  $("#success-alert1").slideUp(500);
            //    });
                $( "#success-alert8" ).fadeIn( 300 ).delay( 2000 ).fadeOut( 400, function () {
                     window.location.reload();
                 } );

                console.log(response);
            },
            error: function(error) {
                $( "#error-alert8" ).fadeIn( 300 ).delay( 1500 ).fadeOut( 400 );
                console.log(error);
            }
        });

    });

    /* Artifact - Enable URL function*/
    $('#enableURL2').change(function() {
         $('#extUrl2').attr('readonly',!this.checked);
         $('#extUrl2').attr('required',this.checked).val('');

         $('#hashType').attr('readonly',!this.checked);
        $('#hashType').attr('required',this.checked);

         $('#hashVal').attr('readonly',!this.checked);
        $('#hashVal').attr('required',this.checked).val('');

        $('#payload').attr('readonly',this.checked).val('');
    });

    /* Update malware-family required info*/
    $('#update_malwarefamily').click(function() {
        $.ajax({
            url: '/update_malwarefamily',
            data: $('#update_malwarefamilyform').serialize(),
            type: 'POST',
            success: function(response) {

             //   $("#success-alert1").fadeTo(2000, 500).slideUp(500, function(){
             //  $("#success-alert1").slideUp(500);
            //    });
                $( "#success-alert1" ).fadeIn( 300 ).delay( 2000 ).fadeOut( 400, function () {
                     window.location.reload();
                 } );
                console.log(response);
            },
            error: function(error) {
                $("#error-alert1").fadeTo(2000, 500).slideUp(500, function(){
               $("#error-alert1").slideUp(500);
                });
                console.log(error);
            }
        });

    });
    $('#labels').change(function () {
            var value = $(this).val();
            $('#labels_final').val(value);
          });
    $('#comm_capabilities').change(function () {
            var value = $(this).val();
            $('#comm_capabilities_final').val(value);
          });
    $('#comm_coderefs').change(function () {
            var value = $(this).val();
            $('#comm_coderefs').val(value);
          });
    $('#comm_behaviorrefs').change(function () {
            var value = $(this).val();
            $('#comm_behaviorrefs_final').val(value);
          });
    $('#references').change(function () {
            var value = $(this).val();
            $('#references_final').val(value);
          });

});





